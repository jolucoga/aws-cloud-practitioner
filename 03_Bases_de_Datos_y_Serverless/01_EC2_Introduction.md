# Introducci√≥n a EC2

## ¬øQu√© es Amazon EC2?

EC2 (Elastic Compute Cloud) es uno de los servicios m√°s populares de AWS y representa el concepto de Infraestructura como Servicio (IaaS).

### Capacidades principales:

- üñ•Ô∏è Alquilar m√°quinas virtuales (instancias EC2)
- üíæ Almacenar datos en unidades virtuales (EBS)
- ‚öñÔ∏è Distribuir carga entre m√°quinas (ELB - Elastic Load Balancer)
- üìà Escalar servicios mediante Auto Scaling Groups (ASG)

> üí° **Nota Importante**: Conocer EC2 es fundamental para entender el funcionamiento del Cloud y es uno de los temas m√°s evaluados en el examen AWS Cloud Practitioner.

---

## Configuraci√≥n del Presupuesto de AWS

### ¬øPor qu√© configurar un presupuesto?

Antes de comenzar a usar servicios de AWS, es crucial establecer controles de costos para evitar cargos inesperados.

### Pasos para configurar un presupuesto

#### 1. Habilitar acceso a facturaci√≥n para usuarios IAM

1. Iniciar sesi√≥n con la cuenta root
2. Ir a Mi cuenta (Account)
3. Buscar: "Acceso a usuario de IAM y rol a informaci√≥n de facturaci√≥n"
4. Activar esta opci√≥n
5. Actualizar

#### 2. Crear un presupuesto

**Opci√≥n 1: Presupuesto de Gasto Cero**

Ideal para estudiantes que solo quieren aprender:
- Notificaci√≥n cuando el gasto supere $0
- Correo de alerta configurado

**Opci√≥n 2: Presupuesto Mensual Personalizado**

Para uso en producci√≥n o desarrollo:
- Definir cantidad mensual (ej: $10)
- Configurar alertas en umbrales espec√≠ficos:
  - 85% del presupuesto ($8.50)
  - 100% del presupuesto ($10.00)
  - Gasto previsto alcanza 100%

#### 3. Presupuesto Avanzado

**Caracter√≠sticas:**

- Presupuesto recurrente (mensual)
- Fecha de inicio personalizable
- Filtros por servicio espec√≠fico
- M√∫ltiples destinatarios de alertas
- Umbrales personalizados

**Ejemplo de configuraci√≥n:**

```json
{
  "tipo": "mensual",
  "monto": "$100",
  "servicios": ["EC2", "S3", "RDS"],
  "alertas": {
    "80%": ["joan@empresa.com", "miguel@empresa.com"],
    "90%": ["joan@empresa.com", "miguel@empresa.com", "damian@empresa.com"]
  }
}
```

### üìä Panel de Facturaci√≥n

**Acceso:** AWS Console ‚Üí Billing Dashboard

**Informaci√≥n disponible:**

- Resumen de costos actuales
- Servicios con mayor gasto
- Tendencias de gasto (3-6 meses)
- Facturas hist√≥ricas
- Desglose por servicio

---

## Fundamentos de EC2

### Opciones de Configuraci√≥n de Instancias

Al crear una instancia EC2, puedes configurar:

#### 1. Sistema Operativo

- üêß Linux (Amazon Linux, Ubuntu, Red Hat, etc.)
- ü™ü Windows (Windows Server)
- üçé Mac OS

#### 2. Recursos de Computaci√≥n

- **CPU:** N√∫mero de n√∫cleos y potencia de c√°lculo
- **RAM:** Memoria de acceso aleatorio (desde 1GB hasta varios TB)

#### 3. Almacenamiento

- **EBS (Elastic Block Store):** Conectado a la red
- **EFS (Elastic File System):** Sistema de archivos de red
- **EC2 Instance Store:** Almacenamiento de hardware (ef√≠mero)

#### 4. Configuraci√≥n de Red

- Velocidad de tarjeta de red
- Direcci√≥n IP p√∫blica
- Configuraci√≥n de VPC

#### 5. Seguridad

- **Security Groups:** Reglas de firewall
- **Key Pairs:** Claves SSH para acceso seguro

#### 6. Datos de Usuario (User Data)

Script de arranque que se ejecuta en el primer inicio de la instancia.

### EC2 User Data

Los datos de usuario permiten automatizar la configuraci√≥n inicial:

```bash
#!/bin/bash
# Actualizar el sistema
yum update -y

# Instalar servidor web Apache
yum install -y httpd

# Iniciar el servicio
systemctl start httpd
systemctl enable httpd

# Crear p√°gina web simple
echo "<h1>Hola Mundo desde $(hostname -f)</h1>" > /var/www/html/index.html
```

#### Caracter√≠sticas:

- ‚úÖ Se ejecuta **solo una vez** en el primer arranque
- ‚úÖ Se ejecuta con privilegios de **root**
- ‚úÖ Automatiza tareas como:
  - Instalaci√≥n de actualizaciones
  - Instalaci√≥n de software
  - Descarga de archivos
  - Configuraci√≥n de servicios

---

## Lanzamiento de Instancias EC2

### Pr√°ctica: Crear tu Primera Instancia

#### Requisitos previos:

- Cuenta de AWS activa
- Regi√≥n seleccionada (ej: us-east-1)

#### Pasos detallados:

**1. Acceder al servicio EC2**

```
AWS Console ‚Üí EC2 ‚Üí Instances ‚Üí Launch Instance
```

**2. Configuraci√≥n b√°sica**

| Campo | Valor | Notas |
|-------|-------|-------|
| **Name** | mi-primera-instancia | Nombre descriptivo |
| **AMI** | Amazon Linux 2 | ‚úÖ Capa gratuita |
| **Instance Type** | t2.micro | ‚úÖ Capa gratuita |

**3. Configurar Key Pair**

```
Crear nuevo Key Pair:
- Nombre: demo_par_claves
- Tipo: RSA
- Formato: 
  * .pem (Linux/Mac/Windows 10+)
  * .ppk (Windows < 10 con PuTTY)
```

> ‚ö†Ô∏è **IMPORTANTE**: Guarda el archivo `.pem` o `.ppk` en lugar seguro. No se puede recuperar despu√©s.

**4. Configuraci√≥n de Red**

- VPC: Default
- Subnet: No preference
- Auto-assign Public IP: Enable

**5. Configurar Security Group**

```
Crear nuevo Security Group:
- Nombre: launch-wizard-1
- Reglas de entrada:
  * SSH (puerto 22) - Tu IP
  * HTTP (puerto 80) - 0.0.0.0/0
```

**6. Configurar Almacenamiento**

```
Volumen Root:
- Tama√±o: 8 GB (por defecto)
- Tipo: gp2 (SSD de prop√≥sito general)
- Delete on Termination: Yes
```

**7. Detalles Avanzados - User Data**

```bash
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo "<h1>Hola mundo desde $(hostname -f)</h1>" > /var/www/html/index.html
```

**8. Lanzar Instancia**

```
Review ‚Üí Launch Instance
‚è±Ô∏è Tiempo de aprovisionamiento: ~30-60 segundos
```

### Verificaci√≥n de la Instancia

#### Estados de la instancia:

- üî¥ **Pending**: Inici√°ndose
- üü¢ **Running**: En ejecuci√≥n
- üü° **Stopping**: Deteni√©ndose
- ‚ö´ **Stopped**: Detenida
- üî¥ **Terminated**: Eliminada (permanente)

#### Acceder al sitio web:

1. Copiar la **Public IPv4 address**
2. Abrir navegador
3. Navegar a: `http://[PUBLIC-IP]`

> ‚ö†Ô∏è **Nota**: Usar `http://` no `https://` (puerto 80, no 443)

### Operaciones con Instancias

#### Detener una instancia:

```
Select Instance ‚Üí Instance State ‚Üí Stop Instance
```

- La instancia se detiene pero no se elimina
- No se cobra por tiempo de computaci√≥n
- Se sigue cobrando por almacenamiento EBS
- **La IP p√∫blica cambia** al reiniciar

#### Iniciar una instancia detenida:

```
Select Instance ‚Üí Instance State ‚Üí Start Instance
```

#### Terminar una instancia:

```
Select Instance ‚Üí Instance State ‚Üí Terminate Instance
```

- ‚ö†Ô∏è **Acci√≥n irreversible**
- Se elimina la instancia y sus datos
- Se elimina el almacenamiento EBS (si est√° configurado)

---

## Costos Asociados a Direcciones IPv4 P√∫blicas

### ‚ö†Ô∏è Aviso Importante sobre Costos

Desde 2024, AWS cobra por direcciones IPv4 p√∫blicas, **incluso en la capa gratuita**.

#### Tarifas actuales:

```
üí∞ $0.005 USD por hora por IP p√∫blica
üìä Aproximadamente $3.60 USD al mes
```

#### ¬øCu√°ndo se cobra?

- ‚úÖ IP p√∫blica asignada pero no asociada a instancia EC2 elegible
- ‚úÖ IP p√∫blica sin uso activo
- ‚úÖ IPs el√°sticas no asociadas a instancias en ejecuci√≥n

#### ¬øC√≥mo evitar estos cargos?

**1. Eliminar instancias despu√©s de las pr√°cticas**

```bash
# Siempre terminar instancias de prueba
Instance State ‚Üí Terminate
```

**2. Liberar IPs el√°sticas no utilizadas**

```
EC2 ‚Üí Elastic IPs ‚Üí Select ‚Üí Release
```

**3. Revisar regularmente el panel de facturaci√≥n**

```
Billing Dashboard ‚Üí Check VPC resources
```

### üìã Recomendaci√≥n

> Para estudiantes: **Crear y eliminar** instancias despu√©s de cada pr√°ctica para mantener costos en $0.

---

## Tipos de Instancias EC2

### Nomenclatura de Instancias

Las instancias EC2 siguen una convenci√≥n de nombres:

```
m5.2xlarge
‚îÇ ‚îÇ  ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ Tama√±o dentro de la clase
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ Generaci√≥n (AWS mejora con el tiempo)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Clase de instancia
```

#### Ejemplo:

- **m** = Clase de instancia (prop√≥sito general)
- **5** = Generaci√≥n 5
- **2xlarge** = 2 veces extra grande

### Categor√≠as de Instancias

#### 1. üéØ Prop√≥sito General (General Purpose)

**Casos de uso:**

- Servidores web
- Repositorios de c√≥digo
- Entornos de desarrollo/pruebas

**Caracter√≠sticas:**

- Balance entre computaci√≥n, memoria y red
- Rendimiento equilibrado

**Ejemplos:**

```
t2.micro  - 1 vCPU, 1 GiB RAM   ‚úÖ Capa gratuita
t2.small  - 1 vCPU, 2 GiB RAM
t2.medium - 2 vCPU, 4 GiB RAM
m5.large  - 2 vCPU, 8 GiB RAM
```

#### 2. ‚ö° Computaci√≥n Optimizada (Compute Optimized)

**Casos de uso:**

- Procesamiento por lotes (batch processing)
- Transcodificaci√≥n de medios
- Servidores web de alto rendimiento
- C√≥mputo cient√≠fico y machine learning
- Servidores de videojuegos dedicados

**Caracter√≠sticas:**

- Procesadores de alto rendimiento
- Alto ratio CPU/Memoria

**Ejemplos:**

```
c5.large    - 2 vCPU, 4 GiB RAM
c5.xlarge   - 4 vCPU, 8 GiB RAM
c5.4xlarge  - 16 vCPU, 32 GiB RAM
```

#### 3. üß† Memoria Optimizada (Memory Optimized)

**Casos de uso:**

- Bases de datos relacionales/NoSQL de alto rendimiento
- Almacenes de cach√© distribuidos (Redis, Memcached)
- Bases de datos en memoria para BI
- Procesamiento en tiempo real de big data

**Caracter√≠sticas:**

- Gran cantidad de RAM
- R√°pido rendimiento para conjuntos de datos grandes

**Ejemplos:**

```
r5.large    - 2 vCPU, 16 GiB RAM
r5.xlarge   - 4 vCPU, 32 GiB RAM
r5.16xlarge - 64 vCPU, 512 GiB RAM
```

#### 4. üíæ Almacenamiento Optimizado (Storage Optimized)

**Casos de uso:**

- Sistemas OLTP de alta frecuencia
- Bases de datos relacionales y NoSQL
- Cach√© para bases de datos en memoria
- Aplicaciones de data warehousing
- Sistemas de archivos distribuidos

**Caracter√≠sticas:**

- Alto rendimiento de I/O
- Acceso secuencial r√°pido a grandes datasets
- IOPS elevadas

**Ejemplos:**

```
i3.large    - 2 vCPU, 15.25 GiB RAM, 0.475 TB NVMe SSD
i3.xlarge   - 4 vCPU, 30.5 GiB RAM, 0.950 TB NVMe SSD
d2.xlarge   - 4 vCPU, 30.5 GiB RAM, 6 TB HDD
```

### üìä Tabla Comparativa de Instancias

| Instancia | vCPU | Memoria | Almacenamiento | Red | Precio/hora* |
|-----------|------|---------|----------------|-----|--------------|
| t2.micro | 1 | 1 GiB | Solo EBS | Bajo-Moderado | ‚úÖ Gratis |
| t2.xlarge | 4 | 16 GiB | Solo EBS | Moderado | ~$0.19 |
| c5d.4xlarge | 16 | 32 GiB | 400 NVMe SSD | Hasta 10 Gbps | ~$0.77 |
| r5.16xlarge | 64 | 512 GiB | Solo EBS | 20 Gbps | ~$4.10 |
| m5.8xlarge | 32 | 128 GiB | Solo EBS | 10 Gbps | ~$1.54 |

*Precios aproximados en us-east-1 (pueden variar)

### üîó Recursos √ötiles

- **Comparador de instancias**: https://instances.vantage.sh
- **Documentaci√≥n oficial**: https://aws.amazon.com/ec2/instance-types/

---

## Seguridad en EC2

### Security Groups (Grupos de Seguridad)

Los **Security Groups** son la base de la seguridad de red en AWS, actuando como **firewalls virtuales** para tus instancias EC2.

#### üõ°Ô∏è Caracter√≠sticas principales:

- Controlan el tr√°fico **de entrada** (inbound) y **de salida** (outbound)
- Solo contienen **reglas de permiso** (allow rules)
- Pueden referenciar por **IP** o por **otro Security Group**
- Son **stateful**: si permites tr√°fico de entrada, la respuesta se permite autom√°ticamente

### Funcionamiento de Security Groups

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Internet  ‚îÇ
‚îÇ     WWW     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ Tr√°fico de entrada
       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Security Group  ‚îÇ  ‚Üê Firewall Virtual
‚îÇ                  ‚îÇ
‚îÇ  Reglas entrada  ‚îÇ
‚îÇ  Reglas salida   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ Instancia   ‚îÇ
   ‚îÇ    EC2      ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Reglas de Security Groups

**Componentes de una regla:**

| Campo | Descripci√≥n | Ejemplo |
|-------|-------------|---------|
| Type | Tipo de protocolo | SSH, HTTP, HTTPS, Custom TCP |
| Protocol | Protocolo de transporte | TCP, UDP, ICMP |
| Port Range | Rango de puertos | 22, 80, 443, 1024-65535 |
| Source/Destination | Origen o destino | 0.0.0.0/0, My IP, Security Group |
| Description | Descripci√≥n de la regla | Allow SSH from office |

**Ejemplo de reglas de entrada:**

```json
{
  "Reglas de entrada": [
    {
      "Type": "SSH",
      "Protocol": "TCP",
      "Port": 22,
      "Source": "Mi IP",
      "Description": "SSH desde mi oficina"
    },
    {
      "Type": "HTTP",
      "Protocol": "TCP",
      "Port": 80,
      "Source": "0.0.0.0/0",
      "Description": "Acceso web p√∫blico"
    },
    {
      "Type": "HTTPS",
      "Protocol": "TCP",
      "Port": 443,
      "Source": "0.0.0.0/0",
      "Description": "Acceso web seguro"
    }
  ]
}
```

### Puertos Cl√°sicos que Debes Conocer

| Puerto | Protocolo | Uso | Sistema Operativo |
|--------|-----------|-----|-------------------|
| **22** | SSH (Secure Shell) | Conexi√≥n remota segura | Linux |
| **21** | FTP | Transferencia de archivos | Todos |
| **22** | SFTP | Transferencia segura de archivos | Todos |
| **80** | HTTP | Sitios web no seguros | Todos |
| **443** | HTTPS | Sitios web seguros | Todos |
| **3389** | RDP (Remote Desktop) | Escritorio remoto | Windows |

### Diagrama de Tr√°fico

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Tu Ordenador    ‚îÇ
‚îÇ  IP: 203.0.113.1 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ SSH (Puerto 22) ‚úÖ Autorizado
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Security Group 1       ‚îÇ
‚îÇ   Entrada:               ‚îÇ
‚îÇ   - Puerto 22: 203.0.113.1‚îÇ
‚îÇ   - Puerto 80: 0.0.0.0/0 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ Instancia  ‚îÇ
   ‚îÇ    EC2     ‚îÇ
   ‚îÇ Port 22, 80‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üë
         ‚îÇ SSH (Puerto 22) ‚ùå Denegado
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Otro Ordenador  ‚îÇ
‚îÇ  IP: 198.51.100.1‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Referencia a Otros Security Groups

Un Security Group puede autorizar tr√°fico desde otros Security Groups:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Security Group 1      ‚îÇ
‚îÇ  Entrada:              ‚îÇ
‚îÇ  - SG-2 (autorizado)   ‚îÇ
‚îÇ  - SG-1 (autorizado)   ‚îÇ
‚îÇ  - SG-3 (denegado)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇInstancia ‚îÇ
   ‚îÇ    EC2   ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Instancia con SG-2 ‚Üí ‚úÖ Permitido
Instancia con SG-1 ‚Üí ‚úÖ Permitido
Instancia con SG-3 ‚Üí ‚ùå Denegado
```

### Buenas Pr√°cticas

#### ‚úÖ DO (Hacer):

- Usar Security Groups separados para diferentes roles (web, database, etc.)
- Nombrar descriptivamente los Security Groups
- Documentar reglas con descripciones claras
- Principio de m√≠nimo privilegio
- Usar referencias a Security Groups en lugar de IPs cuando sea posible

#### ‚ùå DON'T (No hacer):

- Permitir 0.0.0.0/0 en SSH (puerto 22)
- Dejar puertos innecesarios abiertos
- Usar un solo Security Group para todo
- Olvidar actualizar reglas despu√©s de cambios de arquitectura

### Pr√°ctica: Configurar Security Groups

#### Paso 1: Crear Security Group

```
EC2 Console ‚Üí Security Groups ‚Üí Create Security Group

Nombre: web-server-sg
Descripci√≥n: Security group para servidores web
VPC: Default VPC
```

#### Paso 2: Configurar Reglas de Entrada

```
Inbound Rules:

1. HTTP
   - Type: HTTP
   - Protocol: TCP
   - Port: 80
   - Source: 0.0.0.0/0
   - Description: Permitir tr√°fico web

2. HTTPS
   - Type: HTTPS
   - Protocol: TCP
   - Port: 443
   - Source: 0.0.0.0/0
   - Description: Permitir tr√°fico web seguro

3. SSH
   - Type: SSH
   - Protocol: TCP
   - Port: 22
   - Source: Mi IP
   - Description: Acceso SSH desde mi IP
```

#### Paso 3: Configurar Reglas de Salida

```
Outbound Rules:

Por defecto: All traffic permitido (0.0.0.0/0)
```

#### Paso 4: Asignar a Instancia

```
Select Instance ‚Üí Actions ‚Üí Security ‚Üí Change Security Groups
```

### Soluci√≥n de Problemas

#### Problema 1: Timeout de conexi√≥n

```
S√≠ntoma: La conexi√≥n se queda "pensando" y no responde
Causa: Security Group bloqueando tr√°fico
Soluci√≥n: Verificar reglas de entrada del puerto requerido
```

#### Problema 2: Connection Refused

```
S√≠ntoma: Error inmediato de conexi√≥n rechazada
Causa: Aplicaci√≥n no est√° corriendo o puerto incorrecto
Soluci√≥n: Verificar que el servicio est√© activo en la instancia
```

#### Problema 3: No puedo acceder a mi sitio web

```
Verificar:
1. Security Group permite puerto 80/443 ‚úî
2. Instancia est√° "Running" ‚úî
3. IP p√∫blica est√° asignada ‚úî
4. Usar http:// no https:// ‚úî
5. Servidor web est√° corriendo en la instancia ‚úî
```

---

## Conexi√≥n a Instancias EC2

### Visi√≥n General de SSH

SSH (Secure Shell) es el protocolo m√°s importante para conectarse remotamente a instancias EC2 y controlarlas mediante l√≠nea de comandos.

**M√©todos de conexi√≥n seg√∫n el sistema operativo:**

| Sistema Operativo | M√©todo | Puerto |
|-------------------|--------|--------|
| Linux | SSH | 22 |
| Mac OS | SSH | 22 |
| Windows 10+ | SSH / PowerShell | 22 |
| Windows <10 | PuTTY | 22 |
| Todos (navegador) | EC2 Instance Connect | 22 |

### üêß M√©todo 1: SSH en Linux/Mac

**Requisitos:**

- Terminal
- Archivo de clave .pem
- Instancia con Security Group permitiendo puerto 22

**Pasos:**

**1. Ubicar tu archivo de clave**

```bash
cd ~/Desktop/tutorial/
ls
# Deber√≠as ver: EC2tutorial.pem
```

**2. Configurar permisos de la clave**

```bash
chmod 400 EC2tutorial.pem
```

> ‚ö†Ô∏è **Importante**: Este paso es obligatorio. SSH rechaza claves con permisos demasiado abiertos por seguridad.

**3. Conectarse a la instancia**

```bash
ssh -i EC2tutorial.pem ec2-user@54.145.171.253
```

Desglosando el comando:
- `ssh`: Comando SSH
- `-i EC2tutorial.pem`: Especifica el archivo de clave
- `ec2-user`: Usuario por defecto en Amazon Linux
- `@54.145.171.253`: IP p√∫blica de la instancia

**4. Aceptar fingerprint**

```
The authenticity of host '54.145.171.253' can't be established.
Are you sure you want to continue connecting (yes/no)? yes
```

**5. ¬°Conectado!**

```bash
[ec2-user@ip-172-31-80-209 ~]$
```

**Comandos √∫tiles una vez conectado:**

```bash
# Ver usuario actual
whoami

# Verificar conectividad
ping 8.8.8.8

# Listar archivos
ls -la

# Ver hostname
hostname -f

# Salir de la sesi√≥n SSH
exit
# o
Ctrl + D
```

### ü™ü M√©todo 2: PuTTY en Windows <10

#### Requisitos:

- PuTTY instalado
- PuTTYgen instalado
- Archivo de clave `.pem`

#### Paso 1: Instalar PuTTY

```
1. Buscar en Google: "PuTTY download"
2. Descargar versi√≥n 64-bit
3. Ejecutar instalador
4. Next ‚Üí Next ‚Üí Install ‚Üí Finish
```

#### Paso 2: Convertir clave .pem a .ppk

```
1. Abrir PuTTYgen
2. File ‚Üí Load Private Key
3. Seleccionar "All Files (*.*)"
4. Elegir tu archivo .pem
5. Click en "Save Private Key"
6. Guardar como: EC2tutorial.ppk
```

#### Paso 3: Configurar PuTTY

```
1. Abrir PuTTY
2. Session:
   - Host Name: ec2-user@[IP-PUBLICA]
   - Port: 22
   - Connection Type: SSH

3. Connection ‚Üí SSH ‚Üí Auth:
   - Browse y seleccionar EC2tutorial.ppk

4. Session:
   - Saved Sessions: MyEC2Instance
   - Save

5. Open
```

#### Paso 4: Conectar

```
login as: ec2-user
Authenticating with public key...

[ec2-user@ip-172-31-80-209 ~]$
```

### ü™ü M√©todo 3: SSH en Windows 10+

**Requisitos:**

- Windows 10 o superior
- PowerShell o Command Prompt
- Archivo de clave .pem

**Pasos:**

**1. Verificar SSH instalado**

```powershell
ssh
# Si aparece el men√∫ de ayuda, SSH est√° instalado
```

**2. Configurar permisos de la clave**

```
1. Click derecho en EC2tutorial.pem
2. Properties ‚Üí Security ‚Üí Advanced
3. Change owner ‚Üí Tu usuario ‚Üí OK
4. Disable inheritance ‚Üí Remove all
5. Add ‚Üí Select Principal ‚Üí Tu usuario
6. Full Control ‚Üí OK ‚Üí Apply
```

**3. Conectarse**

```powershell
ssh -i C:\Users\Usuario\Downloads\EC2tutorial.pem ec2-user@54.145.171.253
```

**4. Tambi√©n funciona en CMD**

```cmd
ssh -i C:\Users\Usuario\Downloads\EC2tutorial.pem ec2-user@54.145.171.253
```

### üåê M√©todo 4: EC2 Instance Connect (Recomendado)

#### Ventajas:

- ‚úÖ No requiere descarga de claves
- ‚úÖ Funciona desde el navegador
- ‚úÖ Compatible con todos los sistemas operativos
- ‚úÖ No requiere configuraci√≥n de SSH client

#### Requisitos:

- Security Group permitiendo puerto 22
- Amazon Linux 2 o Ubuntu (compatibles)

#### Pasos:

**1. Ir a la instancia**

```
EC2 Console ‚Üí Instances ‚Üí Seleccionar instancia
```

**2. Conectar**

```
Actions ‚Üí Connect ‚Üí EC2 Instance Connect
Username: ec2-user
Connect
```

**3. Terminal en el navegador**

```bash
[ec2-user@ip-172-31-80-209 ~]$ whoami
ec2-user

[ec2-user@ip-172-31-80-209 ~]$ ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=107 time=1.24 ms
```

#### Limitaciones:

- Requiere que el Security Group permita puerto 22
- Solo funciona con ciertas AMIs (Amazon Linux 2, Ubuntu)

### Soluci√≥n de Problemas de SSH

#### ‚ùå Problema 1: Permission denied (publickey)

```
Causa: Clave incorrecta o permisos incorrectos

Soluci√≥n Linux/Mac:
chmod 400 archivo.pem
ssh -i archivo.pem ec2-user@IP

Soluci√≥n Windows:
Verificar permisos del archivo (solo tu usuario debe tener acceso)
```

#### ‚ùå Problema 2: Connection timeout

```
Causa: Security Group no permite puerto 22

Soluci√≥n:
1. EC2 Console ‚Üí Security Groups
2. Seleccionar SG de la instancia
3. Inbound Rules ‚Üí Edit
4. Add Rule: SSH, Port 22, My IP
5. Save
```

#### ‚ùå Problema 3: Host key verification failed

```
Causa: La huella digital del host ha cambiado

Soluci√≥n Linux/Mac:
ssh-keygen -R [IP-PUBLICA]

Soluci√≥n Windows:
Eliminar entrada en: C:\Users\Usuario\.ssh\known_hosts
```

#### ‚ùå Problema 4: ssh: command not found (Windows)

```
Causa: SSH no est√° instalado o no est√° en el PATH

Soluci√≥n:
- Usar PuTTY en su lugar
- O instalar OpenSSH:
  Settings ‚Üí Apps ‚Üí Optional Features ‚Üí Add OpenSSH Client
```

#### ‚ùå Problema 5: Network error: Connection refused

```
Causa: La instancia no est√° corriendo o el puerto SSH no est√° activo

Soluci√≥n:
1. Verificar que la instancia est√© en estado "Running"
2. Intentar reiniciar la instancia
3. Verificar que el servicio SSH est√© corriendo en la instancia
```

### üìã Gu√≠a R√°pida de Comandos SSH

```bash
# Conectar con clave espec√≠fica
ssh -i mi-clave.pem usuario@ip

# Conectar con puerto personalizado
ssh -i mi-clave.pem -p 2222 usuario@ip

# Conectar con verbose (debug)
ssh -v -i mi-clave.pem usuario@ip

# Copiar archivo A instancia
scp -i mi-clave.pem archivo.txt usuario@ip:/home/usuario/

# Copiar archivo DESDE instancia
scp -i mi-clave.pem usuario@ip:/home/usuario/archivo.txt ./

# Copiar directorio completo
scp -i mi-clave.pem -r directorio/ usuario@ip:/home/usuario/

# Tunnel/Port forwarding
ssh -i mi-clave.pem -L 8080:localhost:80 usuario@ip
```

### üîê Mejores Pr√°cticas de Seguridad

**1. Nunca compartas tu clave privada (.pem o .ppk)**

```
‚ùå No enviar por email
‚ùå No subir a GitHub
‚ùå No compartir en Slack/Discord
‚úÖ Guardar en ubicaci√≥n segura
‚úÖ Usar diferentes claves para diferentes entornos
```

**2. Usa permisos restrictivos**

```bash
chmod 400 mi-clave.pem  # Solo lectura para el propietario
```

**3. Limita acceso SSH por IP**

```
Security Group:
SSH ‚Üí Port 22 ‚Üí Source: Mi IP (no 0.0.0.0/0)
```

**4. Considera usar AWS Systems Manager Session Manager**

```
- No requiere abrir puerto 22
- No requiere claves SSH
- Auditor√≠a completa
- Acceso basado en IAM
```

---

## Roles IAM para EC2

### ¬øPor Qu√© Usar Roles IAM?

Cuando una instancia EC2 necesita acceder a otros servicios de AWS (S3, DynamoDB, etc.), hay dos opciones:

#### ‚ùå Opci√≥n INCORRECTA: Usar `aws configure`

```bash
# NO HACER ESTO en instancias EC2
aws configure
AWS Access Key ID: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
```

**Problemas:**

- üö® Expone credenciales en la instancia
- üö® Dif√≠cil de rotar credenciales
- üö® Riesgo de seguridad si alguien accede a la instancia
- üö® Las credenciales pueden quedar en logs

#### ‚úÖ Opci√≥n CORRECTA: Usar Roles IAM

```
EC2 Instance ‚Üí IAM Role ‚Üí AWS Services (S3, DynamoDB, etc.)
```

**Ventajas:**

- ‚úÖ No se exponen credenciales
- ‚úÖ Rotaci√≥n autom√°tica de credenciales temporales
- ‚úÖ F√°cil de auditar con CloudTrail
- ‚úÖ Basado en el principio de m√≠nimo privilegio

### Pr√°ctica: Asignar un Rol IAM a EC2

#### Paso 1: Crear el Rol IAM

**1. Ir al servicio IAM**

```
AWS Console ‚Üí IAM ‚Üí Roles ‚Üí Create Role
```

**2. Seleccionar tipo de entidad de confianza**

```
AWS Service ‚Üí EC2 ‚Üí Next
```

**3. Agregar permisos**

```
Buscar: IAMReadOnlyAccess
‚òëÔ∏è IAMReadOnlyAccess
Next
```

**4. Nombrar el rol**

```
Role name: DemoRolEC2
Description: Permite a EC2 leer informaci√≥n de IAM
Create Role
```

#### Paso 2: Verificar la Instancia (Sin Rol)

**1. Conectar a la instancia**

```
EC2 Console ‚Üí Instances ‚Üí Connect ‚Üí EC2 Instance Connect
```

**2. Intentar comando AWS CLI**

```bash
[ec2-user@ip-172-31-80-209 ~]$ aws --version
aws-cli/2.x.x Python/3.x.x Linux/x86_64

[ec2-user@ip-172-31-80-209 ~]$ aws iam list-users

Unable to locate credentials. You can configure credentials by running "aws configure".
```

#### Paso 3: Asignar Rol a la Instancia

**1. Seleccionar instancia**

```
EC2 Console ‚Üí Instances ‚Üí Seleccionar instancia
```

**2. Modificar rol IAM**

```
Actions ‚Üí Security ‚Üí Modify IAM Role
IAM Role: DemoRolEC2
Update IAM Role
```

**3. Verificar asignaci√≥n**

```
Instance Details ‚Üí Security ‚Üí IAM Role: DemoRolEC2
```

#### Paso 4: Probar el Rol

**1. Conectar nuevamente (cerrar sesi√≥n anterior)**

```
EC2 Instance Connect ‚Üí Connect
```

**2. Ejecutar comando AWS CLI**

```bash
[ec2-user@ip-172-31-80-209 ~]$ aws iam list-users

{
    "Users": [
        {
            "UserName": "admin",
            "UserId": "AIDACKCEVSQ6C2EXAMPLE",
            "Arn": "arn:aws:iam::123456789012:user/admin",
            "CreateDate": "2024-01-15T10:30:00Z"
        },
        {
            "UserName": "developer",
            "UserId": "AIDACKCEVSQ6C3EXAMPLE",
            "Arn": "arn:aws:iam::123456789012:user/developer",
            "CreateDate": "2024-01-20T14:20:00Z"
        }
    ]
}
```

‚úÖ **¬°Funciona! La instancia ahora puede acceder a IAM.**

### Demostraci√≥n: Agregar y Quitar Permisos

#### Quitar permiso del rol:

**1. Ir a IAM**

```
IAM ‚Üí Roles ‚Üí DemoRolEC2 ‚Üí Permissions
```

**2. Remover pol√≠tica**

```
IAMReadOnlyAccess ‚Üí Remove
```

**3. Probar nuevamente en EC2**

```bash
[ec2-user@ip-172-31-80-209 ~]$ aws iam list-users

An error occurred (AccessDenied) when calling the ListUsers operation:
User is not authorized to perform: iam:ListUsers
```

‚ùå **Acceso denegado - el rol no tiene permisos**

#### Agregar permiso nuevamente:

**1. Ir a IAM**

```
IAM ‚Üí Roles ‚Üí DemoRolEC2 ‚Üí Add Permissions
```

**2. Buscar y agregar pol√≠tica**

```
Attach Policies ‚Üí Search: IAMReadOnlyAccess
‚òëÔ∏è IAMReadOnlyAccess ‚Üí Add Permissions
```

**3. Probar en EC2 (esperar unos segundos)**

```bash
[ec2-user@ip-172-31-80-209 ~]$ aws iam list-users

{
    "Users": [...]
}
```

‚úÖ **Acceso restaurado**

### Casos de Uso Comunes de Roles IAM

#### 1. Acceso a S3

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::mi-bucket/*"
    }
  ]
}
```

**Uso en EC2:**

```bash
# Listar objetos
aws s3 ls s3://mi-bucket/

# Copiar archivo a S3
aws s3 cp archivo.txt s3://mi-bucket/

# Descargar de S3
aws s3 cp s3://mi-bucket/archivo.txt .
```

#### 2. Acceso a DynamoDB

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:Query"
      ],
      "Resource": "arn:aws:dynamodb:us-east-1:123456789012:table/MiTabla"
    }
  ]
}
```

#### 3. Acceso a Systems Manager Parameter Store

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ssm:GetParameter",
        "ssm:GetParameters"
      ],
      "Resource": "arn:aws:ssm:us-east-1:123456789012:parameter/*"
    }
  ]
}
```

**Uso en EC2:**

```bash
# Obtener par√°metro
aws ssm get-parameter --name "/config/database/password" --with-decryption
```

### üîê Mejores Pr√°cticas con Roles IAM

**1. Principio de M√≠nimo Privilegio**

```
‚úÖ Dar solo los permisos necesarios
‚ùå No usar pol√≠ticas como AdministratorAccess
```

**2. Usar Pol√≠ticas Espec√≠ficas**

```
‚úÖ Limitar por recurso (ARN espec√≠fico)
‚úÖ Limitar por acci√≥n (solo GetObject, no *)
‚ùå Evitar "Resource": "*" y "Action": "*"
```

**3. Separar Roles por Funci√≥n**

```
EC2-WebServer-Role ‚Üí Solo S3 y CloudWatch
EC2-Worker-Role ‚Üí Solo SQS y DynamoDB
EC2-Admin-Role ‚Üí Permisos administrativos limitados
```

**4. Auditar Regularmente**

```
IAM ‚Üí Roles ‚Üí DemoRolEC2 ‚Üí Access Advisor

Ver qu√© servicios se est√°n usando realmente
Eliminar permisos no utilizados
```

**5. Usar Tags para Organizaci√≥n**

```
Environment: Production
Application: WebApp
Team: Backend
CostCenter: Engineering
```

### Comparaci√≥n: Credenciales vs Roles

| Aspecto | `aws configure` | Roles IAM |
|---------|----------------|-----------|
| **Seguridad** | ‚ùå Baja | ‚úÖ Alta |
| **Rotaci√≥n** | ‚ùå Manual | ‚úÖ Autom√°tica |
| **Auditor√≠a** | ‚ùå Dif√≠cil | ‚úÖ F√°cil (CloudTrail) |
| **Configuraci√≥n** | ‚ùå En cada instancia | ‚úÖ Una vez (rol) |
| **Riesgo de exposici√≥n** | ‚ùå Alto | ‚úÖ Bajo |
| **Recomendado para** | ‚ùå Nunca en EC2 | ‚úÖ Siempre en EC2 |

---

## Opciones de Compra

### Resumen de Opciones

AWS ofrece m√∫ltiples modelos de precios para instancias EC2, permiti√©ndote optimizar costos seg√∫n tus necesidades:

| Opci√≥n | Duraci√≥n | Descuento | Caso de Uso |
|--------|----------|-----------|-------------|
| **On-Demand** | Por hora/segundo | 0% | Cargas impredecibles, corto plazo |
| **Reserved** | 1 o 3 a√±os | Hasta 72% | Cargas estables, largo plazo |
| **Savings Plans** | 1 o 3 a√±os | Hasta 72% | Flexibilidad con compromiso |
| **Spot** | Variable | Hasta 90% | Cargas tolerantes a fallos |
| **Dedicated Hosts** | On-Demand o Reserved | Variable | Cumplimiento normativo |
| **Dedicated Instances** | On-Demand | Variable | Aislamiento de hardware |
| **Capacity Reservations** | Bajo demanda | 0% | Capacidad garantizada en AZ |

### 1. üíµ Instancias On-Demand (Bajo Demanda)

**Caracter√≠sticas:**

- Pagas solo por lo que usas
- Sin compromiso a largo plazo
- Sin pagos por adelantado

**Facturaci√≥n:**

```
Linux/Windows: Por segundo (despu√©s del primer minuto)
Otros OS: Por hora
```

**Casos de uso:**

- ‚úÖ Aplicaciones con cargas impredecibles
- ‚úÖ Desarrollo y pruebas
- ‚úÖ Aplicaciones que no pueden interrumpirse
- ‚úÖ Primer uso de AWS

**Ejemplo de costos:**

```
Instancia: t2.micro
Regi√≥n: us-east-1
Costo: ~$0.0116/hora

Uso diario (24h): $0.28
Uso mensual (730h): $8.47
```

### 2. üìã Instancias Reservadas (Reserved Instances)

**Caracter√≠sticas:**

- Hasta **72% de descuento** vs On-Demand
- Compromiso de 1 o 3 a√±os
- Tres opciones de pago

**Opciones de pago:**

| Opci√≥n | Pago Inicial | Descuento | Mejor Para |
|--------|--------------|-----------|------------|
| **Sin pago inicial** | 0% | + | Flujo de caja limitado |
| **Pago parcial** | ~50% | ++ | Balance costo/flujo |
| **Pago total** | 100% | +++ | M√°ximo ahorro |

**Tipos de instancias reservadas:**

#### Standard Reserved Instances

```
Caracter√≠sticas:
- Hasta 72% descuento
- Tipo de instancia FIJO
- Regi√≥n FIJA
- Sistema operativo FIJO

Caso de uso:
- Base de datos de producci√≥n
- Aplicaciones con uso constante
```

#### Convertible Reserved Instances

```
Caracter√≠sticas:
- Hasta 66% descuento
- Tipo de instancia FLEXIBLE
- Sistema operativo FLEXIBLE
- Tenancy FLEXIBLE

Caso de uso:
- Cargas que pueden cambiar de tama√±o
- Necesidad de flexibilidad futura
```

**Ejemplo de ahorro:**

```
Instancia: m5.xlarge
On-Demand: $0.192/hora = $1,401/a√±o

Reserved (1 a√±o, todo adelantado):
- Standard: $0.119/hora = $870/a√±o ‚Üí 38% ahorro
- Convertible: $0.134/hora = $979/a√±o ‚Üí 30% ahorro

Reserved (3 a√±os, todo adelantado):
- Standard: $0.073/hora = $533/a√±o ‚Üí 62% ahorro
- Convertible: $0.095/hora = $694/a√±o ‚Üí 50% ahorro
```

### 3. üí∞ Savings Plans (Planes de Ahorro)

**Caracter√≠sticas:**

- Hasta **72% de descuento**
- Compromiso de uso ($/hora) por 1 o 3 a√±os
- M√°s flexible que Reserved Instances

**Tipos de Savings Plans:**

#### EC2 Instance Savings Plans

```
Compromiso: Familia de instancias + Regi√≥n
Flexibilidad:
  ‚úÖ Tama√±o de instancia (m5.large ‚Üí m5.2xlarge)
  ‚úÖ Sistema operativo (Linux ‚Üî Windows)
  ‚úÖ Tenancy (Default ‚Üî Dedicated)
  ‚ùå Regi√≥n fija
  ‚ùå Familia fija

Ejemplo:
  Compromiso: $10/hora en familia M5 en us-east-1
  Puedes usar: m5.large, m5.xlarge, m5.2xlarge
```

#### Compute Savings Plans

```
Compromiso: Cantidad de gasto ($/hora)
Flexibilidad:
  ‚úÖ Familia de instancias
  ‚úÖ Regi√≥n
  ‚úÖ Tama√±o
  ‚úÖ Sistema operativo
  ‚úÖ Servicio (EC2, Fargate, Lambda)

Ejemplo:
  Compromiso: $15/hora en cualquier computaci√≥n
  Puedes usar: EC2 en cualquier regi√≥n, Fargate, Lambda
```

**Comparaci√≥n Savings Plans vs Reserved:**

| Aspecto | Savings Plans | Reserved Instances |
|---------|---------------|-------------------|
| Flexibilidad | ‚úÖ‚úÖ‚úÖ Alta | ‚úÖ‚úÖ Media |
| Descuento | Hasta 72% | Hasta 72% |
| Gesti√≥n | ‚úÖ M√°s simple | ‚ùå M√°s compleja |
| Cross-Region | ‚úÖ (Compute) | ‚ùå No |
| Fargate/Lambda | ‚úÖ (Compute) | ‚ùå No |

### 4. ‚ö° Instancias Spot

**Caracter√≠sticas:**

- Hasta **90% de descuento**
- Precio variable seg√∫n oferta/demanda
- Pueden ser interrumpidas con 2 minutos de aviso

**¬øC√≥mo funcionan?**

```
1. Defines precio m√°ximo que pagas
2. Si precio spot < tu m√°ximo ‚Üí Instancia corre
3. Si precio spot > tu m√°ximo ‚Üí AWS puede terminar instancia
```

**Casos de uso APROPIADOS:**

- ‚úÖ Procesamiento por lotes (batch jobs)
- ‚úÖ An√°lisis de datos
- ‚úÖ Procesamiento de im√°genes
- ‚úÖ Cargas distribuidas y tolerantes a fallos
- ‚úÖ Inicio/fin flexible

**Casos de uso NO APROPIADOS:**

- ‚ùå Bases de datos
- ‚ùå Aplicaciones cr√≠ticas
- ‚ùå Servidores web de producci√≥n
- ‚ùå Trabajos que no pueden interrumpirse

**Ejemplo de uso:**

```bash
# Ejemplo: Procesamiento de video
Input: 1000 videos en S3
Proceso: Conversi√≥n a diferentes resoluciones
Output: Videos procesados en S3

Estrategia:
1. Lanzar 50 instancias Spot
2. Si se interrumpen, el trabajo se redistribuye
3. Ahorro del 80% vs On-Demand
```

### 5. üè¢ Dedicated Hosts (Hosts Dedicados)

**Caracter√≠sticas:**

- Servidor f√≠sico completo dedicado a tu uso
- Visibilidad de sockets, cores y host ID
- Control de ubicaci√≥n de instancias

**Casos de uso:**

- Cumplimiento normativo (regulaciones que requieren aislamiento f√≠sico)
- Licencias BYOL (Bring Your Own License)
  - Por socket
  - Por core
  - Por VM

**Opciones de compra:**

```
On-Demand: Pago por hora del host completo
Reserved: 1 o 3 a√±os (hasta 70% descuento)
```

**Ejemplo:**

```
Dedicated Host para m5.large:
Capacidad: Hasta 16 instancias m5.large en un host

On-Demand: ~$1.68/hora
Reserved (3 a√±os): ~$0.70/hora

Software con licencia por socket:
- Windows Server Datacenter
- SQL Server Enterprise
- Oracle Database
```

### 6. üîí Dedicated Instances (Instancias Dedicadas)

**Caracter√≠sticas:**

- Hardware dedicado a tu cuenta
- Pueden compartir hardware con otras instancias **de tu cuenta**
- Sin control de ubicaci√≥n de instancia

**Diferencia con Dedicated Hosts:**

| Aspecto | Dedicated Instances | Dedicated Hosts |
|---------|-------------------|-----------------|
| **Hardware** | Dedicado a tu cuenta | Servidor f√≠sico dedicado |
| **Visibilidad** | No | Sockets, cores, host ID |
| **Control de ubicaci√≥n** | No | S√≠ |
| **BYOL** | Limitado | Completo |
| **Precio** | M√°s econ√≥mico | M√°s caro |

### 7. üéØ Capacity Reservations (Reservas de Capacidad)

**Caracter√≠sticas:**

- Reserva capacidad en una AZ espec√≠fica
- Sin compromiso de tiempo
- Sin descuentos (precio On-Demand)

**Casos de uso:**

- Cargas de trabajo ininterrumpidas a corto plazo
- Necesidad de garantizar capacidad en momentos espec√≠ficos
- DR (Disaster Recovery) planning

**Ejemplo:**

```
Escenario: Black Friday

Preparaci√≥n:
1. Reservar 100 instancias m5.large en us-east-1a
2. Durante el evento: Lanzar instancias en capacidad reservada
3. Despu√©s del evento: Cancelar reserva

Costo:
- Pagas por capacidad reservada aunque no uses instancias
- Precio On-Demand por instancias lanzadas
```

### üí° Analog√≠a: Hotel de Vacaciones

Para entender las opciones de compra, imagina un resort de vacaciones:

```
üè® On-Demand (Bajo Demanda)
Llegas y pagas precio completo
- Sin reserva
- M√°xima flexibilidad
- Precio completo

üè® Reserved (Reservado)
Reservas con anticipaci√≥n
- Compromiso de 1-3 a√±os
- Descuento significativo
- Si planeas quedarte mucho tiempo

üè® Savings Plans (Planes de Ahorro)
Pagas cantidad fija por hora
- Puedes cambiar de habitaci√≥n
- King, Suite, Vista al mar
- Flexibilidad con ahorro

üè® Spot (Subasta)
El hotel subasta habitaciones vac√≠as
- Mejor postor gana
- Pueden echarte si alguien paga m√°s
- S√∫per barato pero arriesgado

üè® Dedicated Hosts (Edificio Completo)
Rentas edificio entero del resort
- Control total
- Muy caro
- Para necesidades espec√≠ficas

üè® Capacity Reservations (Reserva sin descuento)
Reservas habitaci√≥n pagando precio completo
- Garant√≠a de disponibilidad
- Pagas aunque no te quedes
- Sin descuento
```

### üìä Tabla Comparativa de Precios

Ejemplo: Instancia **m4.large** en **us-east-1**

| Tipo | Precio/hora | Ahorro | Notas |
|------|-------------|--------|-------|
| **On-Demand** | $0.10 | 0% | L√≠nea base |
| **Spot** | $0.038-$0.039 | 61% | Variable, puede interrumpirse |
| **Reserved 1y (sin adelanto)** | $0.062 | 38% | Standard |
| **Reserved 1y (todo adelanto)** | $0.058 | 42% | Standard |
| **Reserved 3y (sin adelanto)** | $0.043 | 57% | Standard |
| **Reserved 3y (todo adelanto)** | $0.037 | 63% | Standard |
| **Savings Plan 1y** | $0.062 | 38% | Mayor flexibilidad |
| **Convertible Reserved 1y** | $0.071 | 29% | M√°s flexible |
| **Dedicated Host** | On-Demand | 0% | Precio base |
| **Dedicated Host Reserved** | Var√≠a | Hasta 70% | Con compromiso |

### üéØ Estrategia de Compra Recomendada

```
Carga de trabajo t√≠pica:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Base constante (70%)          ‚îÇ  ‚Üê Reserved Instances o
‚îÇ   M5.xlarge x 10                ‚îÇ     Savings Plans (3 a√±os)
‚îÇ                                 ‚îÇ     Ahorro: 60-72%
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Carga predecible (20%)        ‚îÇ  ‚Üê Reserved Instances (1 a√±o)
‚îÇ   M5.xlarge x 3                 ‚îÇ     Ahorro: 30-40%
‚îÇ                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Picos impredecibles (10%)     ‚îÇ  ‚Üê On-Demand + Spot
‚îÇ   M5.xlarge x 0-5               ‚îÇ     Flexibilidad total
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Ahorro total estimado: 50-60% vs todo On-Demand
```

### üìà Calculando tu Estrategia

**Herramientas de AWS:**

1. **Cost Explorer** ‚Üí Analiza patrones de uso hist√≥rico
2. **Compute Optimizer** ‚Üí Recomienda tipo y tama√±o de instancia
3. **Savings Plans Recommendations** ‚Üí Calcula ahorros potenciales

**Ejemplo pr√°ctico:**

```
Uso actual: 100 m5.xlarge On-Demand 24/7

An√°lisis:
- 70 instancias siempre activas ‚Üí Reserved 3y
- 20 instancias activas horario laboral ‚Üí Reserved 1y  
- 10 instancias para picos ‚Üí On-Demand + Spot

Ahorro anual:
On-Demand total: $168,192/a√±o
Con estrategia mixta: $75,686/a√±o
Ahorro: $92,506/a√±o (55%)
```

---

## Modelo de Responsabilidad Compartida

### Concepto de Responsabilidad Compartida

AWS opera bajo un **modelo de responsabilidad compartida** donde tanto AWS como el cliente tienen responsabilidades espec√≠ficas de seguridad y gesti√≥n.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    RESPONSABILIDAD DEL CLIENTE         ‚îÇ
‚îÇ    "Seguridad EN el Cloud"             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    Datos del cliente                   ‚îÇ
‚îÇ    Plataforma, aplicaciones, IAM       ‚îÇ
‚îÇ    Sistema operativo, red, firewall    ‚îÇ
‚îÇ    Cifrado de datos (cliente/servidor) ‚îÇ
‚îÇ    Integridad de datos y autenticaci√≥n ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    RESPONSABILIDAD DE AWS              ‚îÇ
‚îÇ    "Seguridad DEL Cloud"               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    Software                            ‚îÇ
‚îÇ    - Computaci√≥n                       ‚îÇ
‚îÇ    - Almacenamiento                    ‚îÇ
‚îÇ    - Base de datos                     ‚îÇ
‚îÇ    - Red                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    Hardware/Infraestructura global     ‚îÇ
‚îÇ    - Regiones                          ‚îÇ
‚îÇ    - Zonas de disponibilidad           ‚îÇ
‚îÇ    - Ubicaciones edge                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Responsabilidad Compartida para EC2

#### üî∑ Responsabilidades de AWS

**1. Infraestructura f√≠sica**

- Seguridad global de la red
- Centros de datos f√≠sicos
- Hardware del servidor

**2. Aislamiento en hosts f√≠sicos**

- Separaci√≥n entre clientes
- Virtualizaci√≥n segura

**3. Sustituci√≥n de hardware defectuoso**

- Mantenimiento de hardware
- Reemplazo proactivo

**4. Validaci√≥n de la normativa**

- Cumplimiento de est√°ndares
- Certificaciones (ISO, SOC, PCI-DSS)

#### üî∂ Responsabilidades del Cliente

**1. Grupos de seguridad y reglas de firewall**

```
Tu responsabilidad:
- Configurar Security Groups correctamente
- Permitir solo puertos necesarios
- Restringir acceso por IP
```

**2. Parches y actualizaciones del SO**

```bash
# ‚ö†Ô∏è T√∫ debes ejecutar:
sudo yum update -y                    # Amazon Linux
sudo apt update && sudo apt upgrade -y # Ubuntu
```

**3. Software y utilidades instaladas**

```
Tu responsabilidad:
- Mantener software actualizado
- Aplicar parches de seguridad
- Configurar aplicaciones correctamente
```

**4. Roles IAM asignados**

```
Tu responsabilidad:
- Crear roles con permisos apropiados
- Principio de m√≠nimo privilegio
- Auditar permisos regularmente
```

**5. Gesti√≥n de acceso de usuarios IAM**

```
Tu responsabilidad:
- Crear usuarios y grupos
- Asignar permisos
- Implementar MFA
- Rotar credenciales
```

**6. Seguridad de los datos**

```
Tu responsabilidad:
- Cifrado de datos en reposo
- Cifrado de datos en tr√°nsito
- Backups
- Control de acceso a datos
```

### Ejemplo: Responsabilidades en RDS

#### AWS es responsable de:

- ‚úÖ Gestionar instancia EC2 subyacente
- ‚úÖ Desactivar acceso SSH al host
- ‚úÖ Parches autom√°ticos de base de datos
- ‚úÖ Parches autom√°ticos del sistema operativo
- ‚úÖ Auditor√≠a del disco y hardware subyacente

#### T√∫ eres responsable de:

- üî∂ Verificar reglas de Security Group
- üî∂ Crear usuarios en la base de datos
- üî∂ Asignar permisos a usuarios
- üî∂ Configurar base de datos p√∫blica o privada
- üî∂ Configurar conexiones SSL obligatorias
- üî∂ Habilitar cifrado de base de datos

### Ejemplo: Responsabilidades en S3

#### AWS es responsable de:

- ‚úÖ Infraestructura global
- ‚úÖ Durabilidad (99.999999999%)
- ‚úÖ Disponibilidad de la plataforma
- ‚úÖ Separaci√≥n entre datos de clientes
- ‚úÖ Empleados de AWS no pueden acceder a tus datos

#### T√∫ eres responsable de:

- üî∂ Configuraci√≥n de buckets
- üî∂ Pol√≠ticas de bucket
- üî∂ Configuraci√≥n de acceso p√∫blico
- üî∂ Usuarios y roles IAM
- üî∂ Habilitar cifrado de objetos
- üî∂ Versionado de objetos

### üìã Checklist de Seguridad para EC2

#### Configuraci√≥n Inicial

- [ ] Security Group configurado con m√≠nimo privilegio
- [ ] Solo puertos necesarios abiertos
- [ ] SSH restringido a IPs conocidas
- [ ] Key pair creado y almacenado de forma segura

#### Sistema Operativo

- [ ] Parches de seguridad aplicados
- [ ] Sistema operativo actualizado
- [ ] Software innecesario desinstalado
- [ ] Firewall del SO configurado (iptables/firewalld)

#### Acceso y Autenticaci√≥n

- [ ] Rol IAM asignado (no usar aws configure)
- [ ] Permisos de rol basados en m√≠nimo privilegio
- [ ] No hay credenciales hardcodeadas en c√≥digo
- [ ] SSH con key pair (no contrase√±as)

#### Datos y Aplicaciones

- [ ] Cifrado de datos en reposo (EBS)
- [ ] Cifrado de datos en tr√°nsito (SSL/TLS)
- [ ] Backups configurados
- [ ] Logs enviados a CloudWatch

#### Monitorizaci√≥n

- [ ] CloudWatch alarms configuradas
- [ ] CloudTrail habilitado
- [ ] Revisi√≥n regular de logs
- [ ] AWS Config para auditor√≠a de configuraci√≥n

### ‚ö†Ô∏è Errores Comunes y Responsabilidades

| Error | ¬øDe qui√©n es la responsabilidad? | Soluci√≥n |
|-------|----------------------------------|----------|
| Instancia hackeada por puerto SSH abierto | üî∂ Cliente | Restringir Security Group |
| Hardware del servidor falla | üî∑ AWS | AWS reemplaza autom√°ticamente |
| Software desactualizado con vulnerabilidad | üî∂ Cliente | Aplicar parches regularmente |
| P√©rdida de datos por no hacer backup | üî∂ Cliente | Implementar estrategia de backup |
| Interrupci√≥n de servicio en AZ | üî∑ AWS | AWS restaura servicio |
| Credenciales IAM expuestas en GitHub | üî∂ Cliente | Rotar credenciales, usar Secrets Manager |
| Datos robados por acceso no autorizado | üî∂ Cliente | Revisar pol√≠ticas IAM y S3 |

### üéØ Mejores Pr√°cticas

#### Para AWS (lo que ellos hacen):

- Mantener infraestructura f√≠sica segura
- Proporcionar servicios con alta disponibilidad
- Mantener certificaciones de cumplimiento
- Actualizar y parchear infraestructura subyacente

#### Para el Cliente (lo que T√ö debes hacer):

**1. Implementar el principio de m√≠nimo privilegio**

```
‚úÖ Roles con permisos espec√≠ficos
‚úÖ Security Groups restrictivos
‚úÖ No usar credenciales root
```

**2. Mantener sistemas actualizados**

```bash
# Automatizar actualizaciones
sudo yum update -y

# O usar AWS Systems Manager Patch Manager
```

**3. Habilitar cifrado**

```
‚úÖ EBS volumes cifrados
‚úÖ S3 buckets con SSE-S3 o SSE-KMS
‚úÖ RDS con cifrado en reposo
‚úÖ SSL/TLS para datos en tr√°nsito
```

**4. Implementar monitorizaci√≥n y alertas**

```
‚úÖ CloudWatch Logs
‚úÖ CloudTrail para auditor√≠a
‚úÖ AWS Config para compliance
‚úÖ GuardDuty para detecci√≥n de amenazas
```

**5. Realizar backups regulares**

```
‚úÖ Snapshots de EBS autom√°ticos
‚úÖ Backups de RDS
‚úÖ Versionado de S3
‚úÖ AWS Backup para centralizar
```

---

## Resumen

### üéØ Puntos Clave de EC2

#### 1. ¬øQu√© es EC2?

```
EC2 = Elastic Compute Cloud
- IaaS (Infrastructure as a Service)
- M√°quinas virtuales en el cloud
- Escalable y flexible
- Pago por uso
```

#### 2. Componentes principales:

**AMI (Amazon Machine Image)**

```
- Sistema operativo (Linux, Windows, Mac)
- Software preinstalado
- Configuraci√≥n del sistema
```

**Tipo de Instancia**

```
Tama√±o = CPU + RAM

Categor√≠as:
- Prop√≥sito general (t2, m5)
- Computaci√≥n optimizada (c5)
- Memoria optimizada (r5)
- Almacenamiento optimizado (i3, d2)
```

**Almacenamiento**

```
- EBS (Elastic Block Store) - persistente
- Instance Store - ef√≠mero
- EFS (Elastic File System) - compartido
```

**Configuraci√≥n de Red**

```
- VPC (Virtual Private Cloud)
- Subnet p√∫blica o privada
- Security Groups
- IP p√∫blica/privada
```

**User Data**

```bash
#!/bin/bash
# Script que se ejecuta en el primer arranque
yum update -y
yum install -y httpd
systemctl start httpd
```

#### 3. Security Groups

```
Firewall virtual a nivel de instancia

Reglas:
‚úÖ Solo ALLOW (permitir)
‚úÖ Stateful (respuestas autom√°ticas)
‚úÖ Por IP o por Security Group

Puertos importantes:
- 22: SSH (Linux)
- 3389: RDP (Windows)
- 80: HTTP
- 443: HTTPS
```

#### 4. Conexi√≥n a Instancias

| M√©todo | Sistema | Requisito |
|--------|---------|-----------|
| SSH | Linux/Mac | Key pair .pem |
| PuTTY | Windows <10 | Key pair .ppk |
| SSH | Windows 10+ | Key pair .pem |
| Instance Connect | Todos | Navegador |

#### 5. Roles IAM

```
‚úÖ HACER: Usar roles IAM para acceso a AWS services
‚ùå NO HACER: Usar aws configure en instancias

Ventajas:
- Sin credenciales expuestas
- Rotaci√≥n autom√°tica
- Auditable con CloudTrail
```

#### 6. Opciones de Compra

| Opci√≥n | Ahorro | Uso |
|--------|--------|-----|
| On-Demand | 0% | Flexible, impredecible |
| Reserved | Hasta 72% | Estable, 1-3 a√±os |
| Savings Plans | Hasta 72% | Flexible con compromiso |
| Spot | Hasta 90% | Tolerante a interrupciones |
| Dedicated | Var√≠a | Cumplimiento normativo |

#### 7. Modelo de Responsabilidad Compartida

```
AWS ‚Üí Seguridad DEL cloud
- Hardware
- Infraestructura global
- Servicios gestionados

CLIENTE ‚Üí Seguridad EN el cloud
- Security Groups
- Parches del SO
- Datos y cifrado
- Roles IAM
- Configuraci√≥n de aplicaciones
```

### üìä Diagrama Completo de Arquitectura EC2

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    AWS Cloud                        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ              Regi√≥n (us-east-1)               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ    Availability Zone 1a                 ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                         ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ         VPC (10.0.0.0/16)        ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ                                  ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   Public Subnet            ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   (10.0.1.0/24)            ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ                            ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   Security Group     ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   - SSH: 22          ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   - HTTP: 80         ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   - HTTPS: 443       ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ             ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   EC2 Instance       ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   t2.micro           ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   Amazon Linux 2     ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îÇ   IAM Role     ‚îÇ ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îÇ   S3ReadOnly   ‚îÇ ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îÇ   EBS Volume   ‚îÇ ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îÇ   8 GB gp2     ‚îÇ ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤
         ‚îÇ
         ‚îÇ SSH / HTTP
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Usuario ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üéì Preparaci√≥n para el Examen

#### Temas que DEBES dominar:

**1. Tipos de instancias EC2**

- Prop√≥sito general, computaci√≥n, memoria, almacenamiento
- Nomenclatura (m5.2xlarge)

**2. Security Groups**

- Stateful vs NACL (stateless)
- Reglas de entrada/salida
- Puertos comunes (22, 80, 443, 3389)

**3. Opciones de compra**

- On-Demand, Reserved, Spot, Dedicated
- Casos de uso para cada una
- Niveles de ahorro

**4. Roles IAM**

- ¬øPor qu√© usar roles en vez de credenciales?
- C√≥mo asignar roles a EC2

**5. User Data**

- Se ejecuta una sola vez
- Con privilegios root
- Para bootstrap/configuraci√≥n inicial

**6. Modelo de responsabilidad compartida**

- Qu√© gestiona AWS
- Qu√© gestionas t√∫

#### Preguntas t√≠picas del examen:

**Pregunta 1:**

```
Una empresa necesita ejecutar cargas de trabajo de procesamiento 
por lotes que pueden interrumpirse sin problemas. ¬øQu√© opci√≥n 
de compra proporciona el mayor ahorro?

A) On-Demand Instances
B) Reserved Instances
C) Spot Instances ‚úÖ
D) Dedicated Hosts

Respuesta: C - Spot ofrece hasta 90% descuento y es ideal para 
cargas tolerantes a interrupciones.
```

**Pregunta 2:**

```
¬øQu√© es responsabilidad del cliente en el modelo de 
responsabilidad compartida para EC2?

A) Mantenimiento del hardware f√≠sico
B) Parches del sistema operativo ‚úÖ
C) Seguridad del hipervisor
D) Mantenimiento de la red f√≠sica

Respuesta: B - El cliente debe mantener el SO actualizado.
```

**Pregunta 3:**

```
Una aplicaci√≥n web necesita permitir tr√°fico HTTP desde 
cualquier lugar. ¬øQu√© configuraci√≥n de Security Group es correcta?

A) Type: HTTP, Port: 80, Source: 0.0.0.0/0 ‚úÖ
B) Type: HTTP, Port: 443, Source: Mi IP
C) Type: HTTPS, Port: 80, Source: 0.0.0.0/0
D) Type: SSH, Port: 22, Source: 0.0.0.0/0

Respuesta: A - HTTP usa puerto 80 y debe permitir todo el tr√°fico.
```

**Pregunta 4:**

```
¬øCu√°l es la mejor pr√°ctica para que una instancia EC2
acceda a un bucket de S3?

A) Configurar credenciales con aws configure
B) Hardcodear Access Key en la aplicaci√≥n
C) Asignar un rol IAM a la instancia ‚úÖ
D) Compartir la contrase√±a root de AWS

Respuesta: C - Los roles IAM son la forma segura y recomendada.
```

### ‚úÖ Checklist Final

Antes del examen, aseg√∫rate de poder responder:

- [ ] ¬øQu√© es EC2 y para qu√© sirve?
- [ ] ¬øCu√°les son los componentes de una instancia EC2?
- [ ] ¬øQu√© tipos de instancias existen y sus casos de uso?
- [ ] ¬øC√≥mo funcionan los Security Groups?
- [ ] ¬øCu√°les son los puertos m√°s comunes? (22, 80, 443, 3389)
- [ ] ¬øC√≥mo conectarse a una instancia EC2?
- [ ] ¬øPor qu√© usar roles IAM en lugar de credenciales?
- [ ] ¬øQu√© son los User Data y cu√°ndo se ejecutan?
- [ ] ¬øCu√°les son las opciones de compra y sus ahorros?
- [ ] ¬øQu√© es responsabilidad de AWS vs el cliente?
- [ ] ¬øCu√°ndo usar On-Demand vs Reserved vs Spot?
- [ ] ¬øQu√© sucede con la IP p√∫blica al detener una instancia?

### üìö Recursos Adicionales

**Documentaci√≥n oficial:**

- EC2 User Guide: https://docs.aws.amazon.com/ec2/
- Security Groups: https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html
- Instance Types: https://aws.amazon.com/ec2/instance-types/
- Pricing: https://aws.amazon.com/ec2/pricing/

**Herramientas √∫tiles:**

- Calculadora de precios: https://calculator.aws/
- Comparador de instancias: https://instances.vantage.sh/
- EC2 Instance Connect: Desde la consola de AWS

**Pr√°ctica:**

- AWS Free Tier: 750 horas/mes de t2.micro
- Siempre terminar instancias despu√©s de practicar
- Configurar presupuestos para evitar cargos

---

## üéâ ¬°Felicidades!

Has completado el m√≥dulo de EC2. Ahora deber√≠as ser capaz de:

- ‚úÖ Lanzar y configurar instancias EC2
- ‚úÖ Implementar Security Groups correctamente
- ‚úÖ Conectarte a instancias mediante SSH
- ‚úÖ Asignar roles IAM a instancias
- ‚úÖ Elegir la opci√≥n de compra adecuada
- ‚úÖ Entender el modelo de responsabilidad compartida

### üöÄ Pr√≥ximos Pasos

1. **Practicar** lanzando diferentes tipos de instancias
2. **Experimentar** con User Data scripts
3. **Configurar** Security Groups restrictivos
4. **Asignar** roles IAM para acceso a S3
5. **Calcular** costos con diferentes opciones de compra
6. **Realizar** el cuestionario de EC2

¬°Mucho √©xito en tu preparaci√≥n para el examen AWS Cloud Practitioner! üéì

---

**√öltima actualizaci√≥n**: Octubre 2024  
**Versi√≥n**: 1.0  
**Autor**: Basado en el curso AWS Certified Cloud Practitioner

---

## Cuestionario - Amazon EC2

### Instrucciones

- Este cuestionario contiene 20 preguntas sobre Amazon EC2
- Cada pregunta tiene una o m√°s respuestas correctas
- Lee cuidadosamente cada pregunta antes de responder
- Tiempo estimado: 30 minutos

---

### Preguntas

#### Pregunta 1

**¬øQu√© significa EC2?**

A) Elastic Container Cloud  
B) Elastic Compute Cloud  
C) Elastic Configuration Cloud  
D) Elastic Computing Cluster

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

EC2 significa Elastic Compute Cloud. Es el servicio de m√°quinas virtuales de AWS y uno de los servicios m√°s fundamentales de la plataforma.

</details>

---

#### Pregunta 2

**Una empresa necesita ejecutar una aplicaci√≥n web 24/7 durante los pr√≥ximos 3 a√±os con carga predecible. ¬øQu√© opci√≥n de compra de EC2 proporciona el mayor ahorro?**

A) On-Demand Instances  
B) Spot Instances  
C) Reserved Instances (3 a√±os, pago total adelantado)  
D) Dedicated Hosts

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

Reserved Instances con compromiso de 3 a√±os y pago total adelantado ofrecen el mayor descuento (hasta 72%) para cargas de trabajo predecibles y de larga duraci√≥n.

- On-Demand: 0% descuento
- Spot: Hasta 90% pero puede interrumpirse
- Reserved 3 a√±os: Hasta 72% descuento
- Dedicated Hosts: M√°s caro, para cumplimiento normativo

</details>

---

#### Pregunta 3

**¬øCu√°l de las siguientes es responsabilidad del cliente en el modelo de responsabilidad compartida para EC2?**

A) Mantenimiento del hardware f√≠sico del servidor  
B) Actualizaci√≥n y parcheo del sistema operativo invitado  
C) Seguridad del hipervisor  
D) Mantenimiento de la infraestructura de red del data center

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

El cliente es responsable de actualizar y parchear el sistema operativo de sus instancias EC2.

**AWS es responsable de:**
- Hardware f√≠sico
- Hipervisor
- Infraestructura de red del data center
- Aislamiento entre clientes

**El cliente es responsable de:**
- Sistema operativo invitado
- Aplicaciones
- Security Groups
- Datos y cifrado

</details>

---

#### Pregunta 4

**¬øQu√© puertos deben estar abiertos en un Security Group para permitir que los usuarios accedan a un sitio web mediante HTTPS?**

A) Puerto 22  
B) Puerto 80  
C) Puerto 443  
D) Puerto 3389

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

El puerto 443 es utilizado por el protocolo HTTPS para conexiones web seguras.

**Puertos comunes:**
- 22: SSH (Linux)
- 80: HTTP (web no segura)
- 443: HTTPS (web segura)
- 3389: RDP (Windows Remote Desktop)

</details>

---

#### Pregunta 5

**¬øCu√°ndo se ejecuta el script de User Data de EC2?**

A) Cada vez que se inicia la instancia  
B) Solo la primera vez que se inicia la instancia  
C) Cada vez que se detiene la instancia  
D) Manualmente por el usuario

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

El script de User Data se ejecuta solo una vez, durante el primer arranque de la instancia. Se utiliza para automatizar la configuraci√≥n inicial (bootstrap).

**Caracter√≠sticas:**
- Se ejecuta con privilegios de root
- Solo en el primer inicio
- √ötil para: instalar software, actualizar sistema, configurar servicios

</details>

---

#### Pregunta 6

**Una startup est√° desarrollando una nueva aplicaci√≥n y no puede predecir los patrones de uso. ¬øQu√© opci√≥n de compra es la m√°s adecuada?**

A) Reserved Instances  
B) On-Demand Instances  
C) Spot Instances  
D) Dedicated Hosts

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

On-Demand Instances son ideales cuando:
- El uso es impredecible
- No hay compromiso a largo plazo
- Se requiere m√°xima flexibilidad
- Es un proyecto nuevo o en desarrollo

A pesar de ser la opci√≥n m√°s cara, ofrece flexibilidad total sin compromisos.

</details>

---

#### Pregunta 7

**¬øCu√°l es la mejor pr√°ctica para que una instancia EC2 acceda a objetos en un bucket de S3?**

A) Configurar credenciales de AWS usando aws configure  
B) Hardcodear las Access Keys en el c√≥digo de la aplicaci√≥n  
C) Asignar un rol IAM a la instancia EC2  
D) Usar las credenciales del usuario root de AWS

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

Asignar un rol IAM a la instancia es la mejor pr√°ctica porque:

- ‚úÖ No expone credenciales
- ‚úÖ Rotaci√≥n autom√°tica de credenciales temporales
- ‚úÖ F√°cil de auditar
- ‚úÖ Sigue el principio de m√≠nimo privilegio

**‚ùå NUNCA usar:**
- aws configure en instancias EC2
- Access Keys hardcodeadas
- Credenciales root

</details>

---

#### Pregunta 8

**¬øQu√© tipo de instancia EC2 es la m√°s adecuada para una aplicaci√≥n de an√°lisis de big data que requiere grandes cantidades de RAM?**

A) Instancia de prop√≥sito general (T2, M5)  
B) Instancia optimizada para computaci√≥n (C5)  
C) Instancia optimizada para memoria (R5)  
D) Instancia optimizada para almacenamiento (I3)

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

Instancias optimizadas para memoria (R5, X1) est√°n dise√±adas para cargas de trabajo que requieren grandes cantidades de RAM:

- An√°lisis de big data en memoria
- Bases de datos en memoria (Redis, SAP HANA)
- Procesamiento de datos a gran escala
- Aplicaciones de business intelligence

Ejemplo: r5.16xlarge tiene 512 GiB de RAM

</details>

---

#### Pregunta 9

**Una empresa necesita procesar 10,000 im√°genes. El trabajo puede interrumpirse y reanudarse sin problemas. ¬øQu√© opci√≥n de compra minimiza los costos?**

A) On-Demand Instances  
B) Reserved Instances  
C) Spot Instances  
D) Dedicated Instances

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

Spot Instances ofrecen hasta 90% de descuento y son perfectas para:

- ‚úÖ Trabajos por lotes (batch jobs)
- ‚úÖ Procesamiento de im√°genes/videos
- ‚úÖ An√°lisis de datos
- ‚úÖ Cargas tolerantes a interrupciones
- ‚úÖ Trabajos con inicio/fin flexible

**‚ùå NO usar Spot para:**
- Bases de datos
- Aplicaciones cr√≠ticas
- Servidores web de producci√≥n

</details>

---

#### Pregunta 10

**¬øQu√© sucede con la direcci√≥n IP p√∫blica de una instancia EC2 cuando se detiene y luego se reinicia?**

A) Permanece igual  
B) Cambia a una nueva direcci√≥n IP p√∫blica  
C) Se pierde permanentemente  
D) Se convierte en una IP privada

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

La direcci√≥n IP p√∫blica cambia cada vez que se detiene y reinicia una instancia.

- IP privada: Permanece igual
- IP p√∫blica: Cambia en cada stop/start
- Elastic IP: Puede asignarse para mantener IP est√°tica (pero tiene costo)

‚ö†Ô∏è Importante: Esto puede afectar aplicaciones que dependen de la IP

</details>

---

#### Pregunta 11 (Selecci√≥n M√∫ltiple)

**¬øCu√°les de las siguientes son caracter√≠sticas de los Security Groups? (Selecciona DOS)**

A) Solo contienen reglas ALLOW (permitir)  
B) Son stateless  
C) Se aplican a nivel de subnet  
D) Son stateful  
E) Pueden aplicarse a m√∫ltiples instancias

<details>
<summary>Ver respuesta</summary>

**Respuestas correctas: A y D**

**A) Solo contienen reglas ALLOW** ‚úÖ
- No puedes crear reglas DENY expl√≠citas
- Todo est√° denegado por defecto

**D) Son stateful** ‚úÖ
- Si permites tr√°fico entrante, la respuesta se permite autom√°ticamente
- No necesitas regla de salida para respuestas

**Incorrectas:**
- B: Son stateful, no stateless (NACLs son stateless)
- C: Se aplican a nivel de instancia/ENI, no subnet
- E: Correcto, pero solo se ped√≠an DOS respuestas

</details>

---

#### Pregunta 12

**Un desarrollador necesita conectarse remotamente a una instancia EC2 con Linux. ¬øQu√© puerto debe estar abierto en el Security Group?**

A) Puerto 21 (FTP)  
B) Puerto 22 (SSH)  
C) Puerto 80 (HTTP)  
D) Puerto 3389 (RDP)

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

Puerto 22 (SSH) se utiliza para conexiones remotas seguras a instancias Linux.

- Puerto 22: SSH (Linux/Mac/Unix)
- Puerto 3389: RDP (Windows)
- Puerto 21: FTP (transferencia de archivos, inseguro)
- Puerto 80: HTTP (web)

</details>

---

#### Pregunta 13

**¬øQu√© servicio permite conectarse a una instancia EC2 directamente desde el navegador sin necesidad de descargar claves SSH?**

A) AWS Systems Manager Session Manager  
B) EC2 Instance Connect  
C) AWS CloudShell  
D) AWS Management Console

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

EC2 Instance Connect permite:

- Conexi√≥n desde el navegador
- No requiere descargar claves SSH
- Funciona en Amazon Linux 2 y Ubuntu
- Requiere puerto 22 abierto en Security Group

AWS Systems Manager Session Manager tambi√©n funciona pero no requiere puerto 22 abierto.

</details>

---

#### Pregunta 14

**Una empresa necesita cumplir con regulaciones que requieren servidores f√≠sicos dedicados. ¬øQu√© opci√≥n de EC2 deben usar?**

A) On-Demand Instances  
B) Reserved Instances  
C) Dedicated Hosts  
D) Spot Instances

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

Dedicated Hosts proporcionan:

- Servidor f√≠sico completo dedicado
- Visibilidad de sockets, cores, host ID
- Control de ubicaci√≥n de instancias
- Soporte para licencias BYOL (Bring Your Own License)
- Cumplimiento de regulaciones estrictas

Dedicated Instances tambi√©n ofrecen aislamiento pero sin visibilidad ni control del hardware f√≠sico.

</details>

---

#### Pregunta 15

**¬øCu√°l de las siguientes afirmaciones sobre los datos de usuario (User Data) de EC2 es CORRECTA?**

A) Se ejecutan cada vez que se reinicia la instancia  
B) Se ejecutan con permisos de usuario limitados  
C) Solo se ejecutan en el primer arranque de la instancia  
D) Requieren instalaci√≥n manual de software adicional

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

User Data se ejecuta solo en el primer arranque de la instancia.

**Caracter√≠sticas:**
- ‚úÖ Solo primera ejecuci√≥n
- ‚úÖ Con privilegios de root
- ‚úÖ Para bootstrap/configuraci√≥n autom√°tica
- ‚úÖ No requiere software adicional

**Ejemplo de uso:**

```bash
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
```

</details>

---

#### Pregunta 16

**¬øQu√© herramienta de AWS ayuda a optimizar costos recomendando el tipo y tama√±o de instancia m√°s adecuado?**

A) AWS Cost Explorer  
B) AWS Trusted Advisor  
C) AWS Compute Optimizer  
D) AWS Budgets

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

**AWS Compute Optimizer** utiliza machine learning para:

- Recomendar tipos de instancia √≥ptimos
- Analizar patrones de utilizaci√≥n
- Sugerir ajustes de tama√±o (right-sizing)
- Ayudar a reducir costos hasta 25%

**Otras herramientas:**
- Cost Explorer: Visualiza y analiza costos
- Trusted Advisor: Recomendaciones generales (incluye optimizaci√≥n)
- Budgets: Alertas de presupuesto

</details>

---

#### Pregunta 17 (Selecci√≥n M√∫ltiple)

**¬øCu√°les son componentes que puedes configurar al lanzar una instancia EC2? (Selecciona TRES)**

A) AMI (Amazon Machine Image)  
B) Tipo de instancia  
C) Regi√≥n de AWS  
D) Security Group  
E) Dominio DNS personalizado

<details>
<summary>Ver respuesta</summary>

**Respuestas correctas: A, B y D**

Al lanzar una instancia EC2 configuras:

**A) AMI** ‚úÖ
- Sistema operativo
- Software preinstalado
- Configuraci√≥n base

**B) Tipo de instancia** ‚úÖ
- CPU y RAM
- Familia (t2, m5, c5, etc.)
- Tama√±o (micro, small, large, xlarge)

**D) Security Group** ‚úÖ
- Reglas de firewall
- Puertos permitidos
- Control de acceso

**Incorrectas:**
- C: La regi√≥n se selecciona antes, no durante el launch
- E: DNS se configura en Route 53, no en el launch de EC2

</details>

---

#### Pregunta 18

**Una aplicaci√≥n necesita acceder a DynamoDB. ¬øCu√°l es la forma M√ÅS segura de proporcionar acceso desde una instancia EC2?**

A) Crear un usuario IAM y ejecutar `aws configure` en la instancia  
B) Hardcodear Access Keys en las variables de entorno  
C) Crear un rol IAM con permisos de DynamoDB y asignarlo a la instancia  
D) Usar las credenciales del usuario root

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

**Crear un rol IAM y asignarlo a la instancia** es la forma m√°s segura:

**Proceso:**
1. Crear rol IAM con pol√≠tica DynamoDB
2. Asignar rol a instancia EC2
3. Aplicaci√≥n usa credenciales temporales autom√°ticamente

**Ventajas:**
- ‚úÖ Sin credenciales expuestas
- ‚úÖ Rotaci√≥n autom√°tica
- ‚úÖ Auditable con CloudTrail
- ‚úÖ Principio de m√≠nimo privilegio

**‚ùå Nunca:**
- Usar `aws configure` en producci√≥n
- Hardcodear credenciales
- Usar credenciales root

</details>

---

#### Pregunta 19

**¬øQu√© caracter√≠stica diferencia a las Reserved Instances Convertibles de las Standard Reserved Instances?**

A) Mayor descuento  
B) Posibilidad de cambiar el tipo de instancia durante el periodo reservado  
C) No requieren compromiso de tiempo  
D) Pueden interrumpirse por AWS

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: B**

**Convertible Reserved Instances** permiten:

- ‚úÖ Cambiar tipo de instancia
- ‚úÖ Cambiar sistema operativo
- ‚úÖ Cambiar tenancy (default/dedicated)
- ‚úÖ Cambiar familia de instancias

**Comparaci√≥n:**

| Aspecto | Standard | Convertible |
|---------|----------|-------------|
| Descuento | Hasta 72% | Hasta 66% |
| Flexibilidad | Baja | Alta |
| Cambio de tipo | ‚ùå No | ‚úÖ S√≠ |
| Precio | M√°s barato | M√°s caro |

</details>

---

#### Pregunta 20

**Una empresa tiene cargas de trabajo base constantes y picos impredecibles. ¬øCu√°l es la estrategia de compra M√ÅS rentable?**

A) Solo On-Demand Instances  
B) Solo Spot Instances  
C) Reserved Instances para la base + On-Demand para picos  
D) Solo Reserved Instances

<details>
<summary>Ver respuesta</summary>

**Respuesta correcta: C**

**Estrategia mixta** es la m√°s rentable:

```
Arquitectura recomendada:

‚îú‚îÄ‚îÄ Carga base (70%) ‚Üí Reserved Instances
‚îÇ   ‚îî‚îÄ‚îÄ Ahorro: 60-72%
‚îÇ
‚îú‚îÄ‚îÄ Carga predecible (20%) ‚Üí Savings Plans
‚îÇ   ‚îî‚îÄ‚îÄ Ahorro: 40-50%
‚îÇ
‚îî‚îÄ‚îÄ Picos (10%) ‚Üí On-Demand + Spot
    ‚îî‚îÄ‚îÄ Flexibilidad total
```

**Ejemplo:**
- Base: 10 instancias 24/7 ‚Üí Reserved
- Picos: 0-5 instancias variables ‚Üí On-Demand
- Ahorro total: ~50-60% vs todo On-Demand

Esta estrategia optimiza costo y flexibilidad.

</details>

---

## Resultados

**Puntuaci√≥n para aprobar**: 14/20 (70%)

### Evaluaci√≥n por categor√≠as:

**Fundamentos de EC2** (Preguntas 1, 5, 10, 15)
- Conceptos b√°sicos
- User Data
- Comportamiento de IPs

**Seguridad** (Preguntas 3, 4, 7, 12, 18)
- Responsabilidad compartida
- Security Groups
- Roles IAM
- Puertos

**Opciones de Compra** (Preguntas 2, 6, 9, 14, 19, 20)
- On-Demand, Reserved, Spot, Dedicated
- Estrategias de optimizaci√≥n
- Casos de uso

**Tipos y Configuraci√≥n** (Preguntas 8, 11, 13, 16, 17)
- Tipos de instancias
- Herramientas de optimizaci√≥n
- Componentes de configuraci√≥n

---

## An√°lisis de Errores Comunes

### Error #1: Confundir responsabilidades compartidas

```
‚ùå Pensar que AWS actualiza el SO
‚úÖ El cliente debe parchear el SO invitado

Recordar:
- AWS ‚Üí Seguridad DEL cloud (infraestructura)
- Cliente ‚Üí Seguridad EN el cloud (datos, SO, apps)
```

### Error #2: No entender Security Groups

```
‚ùå Pensar que son stateless
‚úÖ Son stateful (respuestas autom√°ticas)

‚ùå Crear reglas DENY
‚úÖ Solo reglas ALLOW (deny por defecto)
```

### Error #3: Confundir opciones de compra

```
‚ùå Usar Reserved para cargas impredecibles
‚úÖ Reserved para cargas estables

‚ùå Usar Spot para bases de datos
‚úÖ Spot para trabajos por lotes tolerantes a fallos
```

### Error #4: Mal uso de credenciales

```
‚ùå Usar aws configure en instancias
‚úÖ Asignar roles IAM

‚ùå Hardcodear Access Keys
‚úÖ Usar credenciales temporales v√≠a roles
```

---

## Recursos para Mejorar

### Si obtuviste menos de 14/20:

- Repasar secci√≥n de Fundamentos de EC2
- Practicar lanzamiento de instancias
- Experimentar con Security Groups
- Estudiar modelo de responsabilidad compartida

### Si obtuviste 14-17/20:

- Profundizar en opciones de compra
- Practicar asignaci√≥n de roles IAM
- Estudiar estrategias de optimizaci√≥n de costos
- Revisar casos de uso de cada tipo de instancia

### Si obtuviste 18-20/20:

¬°Excelente! Est√°s listo para esta secci√≥n del examen.

- Revisar otros m√≥dulos del curso
- Hacer ex√°menes pr√°cticos completos
- Enfocarte en otros servicios de AWS

---

## Pr√≥ximos Pasos

- ‚úÖ Completado: Amazon EC2

**Contin√∫a con:**

- üì¶ Almacenamiento de instancias EC2 (EBS, EFS, Instance Store)
- ‚öñÔ∏è Elastic Load Balancing y Auto Scaling Groups
- üóÑÔ∏è Amazon S3

---

## ¬øListo para el siguiente m√≥dulo?

Contin√∫a tu preparaci√≥n con el m√≥dulo de **Almacenamiento EC2** donde aprender√°s sobre:

- EBS (Elastic Block Store)
- Snapshots
- AMIs (Amazon Machine Images)
- EFS (Elastic File System)
- EC2 Instance Store

¬°Sigue as√≠! üöÄ

---
***
## Notas Finales

Este material cubre la Introducci√≥n a Intancias EC2 para el examen AWS Certified Cloud Practitioner. Practica los conceptos en tu propia cuenta de AWS (usa la capa gratuita) para reforzar el aprendizaje.

¬°Buena suerte en tu examen!

**√öltima actualizaci√≥n**: 22/10/2025  
**Versi√≥n del curso**: AWS Certified Cloud Practitioner CLF-C02